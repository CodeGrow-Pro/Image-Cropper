(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{44:function(e,t,a){e.exports=a(70)},51:function(e,t,a){},52:function(e,t,a){},67:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(33),i=a.n(r),c=(a(51),a(2)),o=(a(52),a(80)),s=a(77),m=a(78),h=a(79),d=a(75),g=a(76),u=a(8),p=a(42),E=a(40),v=a(12),x=a(10),b=a(28);const w=e=>new Promise((t,a)=>{const n=new Image;n.addEventListener("load",()=>t(n)),n.addEventListener("error",e=>a(e)),n.setAttribute("crossOrigin","anonymous"),n.src=e});function C(e){return e*Math.PI/180}async function f(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{horizontal:!1,vertical:!1};const l=await w(e),r=document.createElement("canvas"),i=r.getContext("2d");if(!i)return null;const c=C(a),{width:o,height:s}=function(e,t,a){const n=C(a);return{width:Math.abs(Math.cos(n)*e)+Math.abs(Math.sin(n)*t),height:Math.abs(Math.sin(n)*e)+Math.abs(Math.cos(n)*t)}}(l.width,l.height,a);r.width=o,r.height=s,i.translate(o/2,s/2),i.rotate(c),i.scale(n.horizontal?-1:1,n.vertical?-1:1),i.translate(-l.width/2,-l.height/2),i.drawImage(l,0,0);const m=i.getImageData(t.x,t.y,t.width,t.height);return r.width=t.width,r.height=t.height,i.putImageData(m,0,0),new Promise((e,t)=>{r.toBlob(t=>{e(URL.createObjectURL(t))},"image/jpeg")})}var y=a(34);var j=async function(e,t){const a=await fetch(e),n=await a.blob();return new File([n],t,{type:n.type})},I=a(74);var O=e=>{let{img:t,setCloseImage:a}=e;return l.a.createElement("div",{style:{position:"fixed",top:"0",left:"0",zIndex:"90",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"}},l.a.createElement(m.a,{sx:{width:"60vw",height:"70vh",maxWidth:"800px",maxHeight:"800px",display:"flex",justifyContent:"center",alignItems:"center","@media (max-width: 855px)":{width:"90%",height:"90%"}},p:"md"},l.a.createElement(h.a,{sx:{width:"70%",height:"70%",display:"flex",justifyContent:"center",alignItems:"center","@media (max-width: 855px)":{width:"90%",height:"90%"}}},l.a.createElement(p.a,{size:"xl"},"Cropped Image!"),l.a.createElement("img",{src:t,style:{width:"100%",height:"100%",objectFit:"contain"}}),l.a.createElement(s.a,null,l.a.createElement(g.a,{onClick:()=>{Object(y.saveAs)(t,"image.jpg"),a(""),async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{const n=new FormData;let l=null;await j(e,t?"report.pdf":"image.png").then(e=>{l=e}).catch(e=>{console.error("Error converting Blob URL to File:",e)}),n.append("upload",l),await I.a.post("http://localhost:3312/gallary/v1/image/63e1532bac33633a3df896e3",n,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{e.data.data&&alert("Image upload successfully!")})}catch(a){alert("Image upload failed!")}}(t)},sx:{height:"auto"},p:"sm"},l.a.createElement(s.a,null,l.a.createElement(x.b,{size:20}),l.a.createElement(p.a,null,"Save Image"))),l.a.createElement(g.a,{onClick:()=>a(""),sx:{height:"auto"},p:"sm"},l.a.createElement(s.a,null,l.a.createElement(x.a,{size:20}),l.a.createElement(p.a,null,"Exit")))))))};a(60);const k=e=>{const[t,a]=Object(n.useState)({x:0,y:0}),[r,i]=Object(n.useState)(1),[c,o]=Object(n.useState)(null),[s,m]=Object(n.useState)(0),[h,d]=Object(n.useState)(null),u=Object(n.useCallback)((e,t)=>{o(t)},[]),p=Object(n.useCallback)(async()=>{try{const a=await f(e.imgPath,c,s);e.setIsTakePhotoByCamera(!1),e.setCroppedImage(a)}catch(t){console.error(t)}},[c,s]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(b.a,{image:e.imgPath,crop:t,zoom:r,aspect:1,onCropChange:a,showGrid:!0,onCropComplete:u,onZoomChange:i}),l.a.createElement(g.a,{onClick:p,sx:{height:"auto"},p:"sm"},"Done"))};var S=function(e){const[t,a]=Object(n.useState)(!1),[r,i]=Object(n.useState)(""),[c,o]=Object(n.useState)(!1),[s,m]=Object(n.useState)(""),[h,d]=Object(n.useState)({width:300,height:400});return navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row mt-4"},!r&&l.a.createElement("div",{className:"col-12 text-center"},t&&l.a.createElement("div",{style:{border:"2px dotted red",position:"absolute",height:400,width:300,left:0,right:0,marginLeft:"auto",marginRight:"auto"}}),t&&l.a.createElement("video",{style:{border:"1px solid white"},height:400,muted:!0,autoPlay:!0,className:"app__videoFeed"})||l.a.createElement("img",{src:"https://gifsec.com/wp-content/uploads/2022/10/photography-gifs.gif"}))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 text-center mt-4"},!t&&l.a.createElement("button",{className:"btn btn-primary",onClick:e=>{o(!1),i(""),a(!0),navigator.getUserMedia({video:!0},e=>{let t=document.getElementsByClassName("app__videoFeed")[0];t&&(t.srcObject=e)},e=>console.error(e))}},"Start")||l.a.createElement("button",{className:"btn btn-success",onClick:e=>{const t=document.createElement("CANVAS");var n=document.getElementsByClassName("app__videoFeed")[0];t.height=n.videoHeight,t.width=n.videoHeight/4*3,t.getContext("2d").drawImage(n,(n.videoWidth-n.videoHeight/4*3)/2,0,n.videoHeight/4*3,n.videoHeight,0,0,n.videoHeight/4*3,n.videoHeight),t.toBlob(e=>{(e=>{a(!1),document.getElementsByClassName("app__videoFeed")[0].srcObject.getTracks()[0].stop()})(),i(URL.createObjectURL(e))},"image/jpeg",.95)}},"Capture"),!t&&!!r&&l.a.createElement("button",{className:"btn btn-warning ml-2",onClick:()=>o(!0)},"Crop"))),r&&l.a.createElement(k,{imgPath:r,setIsTakePhotoByCamera:e.setIsTakePhotoByCamera,setCroppedImage:e.setCroppedImage}))},N=a(31),z=a.n(N),R=a(37);var F=e=>{let{imageUrl:t,setIsGenerateReport:a}=e;const r=Object(n.useRef)(),i=async()=>{const e=r.current;if(!e)return;const t=(await z()(e)).toDataURL("image/png"),n=new R.a("p","mm","a4");n.addImage(t,"PNG",10,10,190,0),(async e=>{try{const a=new FormData;let n=null;await j(e,"report.pdf").then(e=>{n=e}).catch(e=>{console.error("Error converting Blob URL to File:",e)}),a.append("file",n),await I.a.post("https://api.the10x.io/user/image-upload",a,{headers:{"Content-Type":"multipart/form-data",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2NWQ0NzQ4YTMzNGVjNTFjZmFiZDVlMTUiLCJpYXQiOjE3MDk1NTU4NzEsImV4cCI6MTcwOTgxNTA3MX0.8u7pb4-Ip_h9ZpdZRKjcqQdqqkTIdep1JV4cYmwN7c0"}}).then(e=>{e.data.data&&alert("Image upload successfully!",e.data.data.fileUrl)})}catch(t){alert("Image upload failed!")}})(n.save("converted_image.pdf")),a(!1)};return l.a.createElement("div",{style:{position:"fixed",top:"0",left:"0",zIndex:"90",width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)"}},l.a.createElement(m.a,{sx:{width:"90vw",height:"90vh",maxWidth:"800px",maxHeight:"800px",display:"flex",justifyContent:"center",alignItems:"center","@media (max-width: 855px)":{width:"90%",height:"90%"}},p:"md"},l.a.createElement(h.a,{sx:{width:"auto",height:"90%",display:"flex",justifyContent:"center",alignItems:"center","@media (max-width: 855px)":{width:"90%",height:"90%"}}},l.a.createElement(p.a,{size:"xl"},"Generated Report!"),l.a.createElement("div",null,l.a.createElement("div",{ref:r,style:{display:"flex",justifyContent:"center"}},l.a.createElement("img",{src:t,alt:"Converted Image",style:{width:"400px",height:"400px",objectFit:"contain"}}))),l.a.createElement(s.a,null,l.a.createElement(g.a,{onClick:()=>{i()}},"Download Pdf & Save"),l.a.createElement(g.a,{onClick:()=>a(!1),sx:{height:"auto"},p:"sm"},l.a.createElement(s.a,null,l.a.createElement(x.a,{size:20}),l.a.createElement(p.a,null,"Exit")))))))};var U=function(){const e=Object(c.o)(),[t,a]=Object(n.useState)({x:0,y:0}),[r,i]=Object(n.useState)(0),[w,C]=Object(n.useState)(!1),[y,j]=Object(n.useState)(!1),[I,k]=Object(n.useState)(1),[N,z]=Object(n.useState)(null),[R,U]=Object(n.useState)(null),[M,P]=Object(n.useState)([]),[T,L]=Object(n.useState)(null),B=Object(n.useCallback)((e,t)=>{z(t)},[]),D=Object(n.useCallback)(async()=>{try{const t=await f(T,N,r);U(t)}catch(e){console.error(e)}},[N,r]);return Object(n.useEffect)(()=>{M[0]&&L(URL.createObjectURL(M[0]))},[M]),l.a.createElement("div",{className:"App"},!w&&l.a.createElement(o.a,{sx:{marginBottom:"2rem",color:"black"}},l.a.createElement(s.a,null,l.a.createElement(p.a,{className:"text"},"Image Cropper"),l.a.createElement(x.c,{className:"text",size:47}))),T&&l.a.createElement(m.a,{shadow:"xl",p:"lg"},l.a.createElement(s.a,{sx:{width:"70vw",height:"70vh","@media (max-width: 855px)":{flexDirection:"column-reverse",minHeight:"700px"}},noWrap:!0},l.a.createElement(h.a,{p:"lg",sx:{width:"100%",height:"100%",outline:"1px solid gray",borderRadius:"10px",justifyContent:"center"}},l.a.createElement(h.a,null,l.a.createElement(h.a,null,l.a.createElement(s.a,{sx:{gap:"0.3rem"}},l.a.createElement(x.f,{size:20}),l.a.createElement(p.a,null,"Zoom Slider:")),l.a.createElement(d.a,{value:I,onChange:k,min:1,max:5,step:.05,sx:{width:"100%"}})),l.a.createElement(h.a,null,l.a.createElement(s.a,{sx:{gap:"0.3rem"}},l.a.createElement(x.d,{size:20}),l.a.createElement(p.a,null,"Rotation Slider:")),l.a.createElement(d.a,{value:r,onChange:i,min:-180,max:180,sx:{width:"100%"}})),l.a.createElement(h.a,null,l.a.createElement(g.a,{onClick:D,sx:{height:"auto"},p:"sm"},l.a.createElement(s.a,null,l.a.createElement(x.e,{size:20}),l.a.createElement(p.a,null,"Show Image"))),l.a.createElement(g.a,{onClick:()=>j(!0),sx:{height:"auto"},p:"sm"},l.a.createElement(s.a,null,l.a.createElement(p.a,null,"Generate Report"))),l.a.createElement(g.a,{onClick:()=>{L(""),U("")},sx:{height:"auto"},p:"sm"},l.a.createElement(s.a,null,l.a.createElement(x.a,{size:20}),l.a.createElement(p.a,null,"Clear Image")))))),l.a.createElement(s.a,{p:"lg",sx:{width:"100%",height:"100%",outline:"1px solid gray",position:"relative",justifyContent:"center",borderRadius:"10px"}},l.a.createElement(u.a,{sx:{width:"100%",height:"100%",position:"relative"}},l.a.createElement(b.a,{image:T,crop:t,rotation:r,zoom:I,aspect:1.2,zoomWithScroll:!0,style:{width:"330px"},onCropChange:a,onRotationChange:i,onCropComplete:B,onZoomChange:k,objectFit:"contain",minZoom:1,maxZoom:5}))))),R&&l.a.createElement(O,{img:R,setCloseImage:U}),!T&&!w&&l.a.createElement(l.a.Fragment,null,l.a.createElement(E.a,{accept:v.a,onDrop:e=>{P(e),console.log("line 198",e)},sx:{width:"60vw",height:"200px",display:"flex",alignItems:"center",justifyContent:"center"}},l.a.createElement(s.a,null,l.a.createElement(x.c,{size:50,stroke:1.5}),l.a.createElement(p.a,{align:"center"},"Drop images here"))),l.a.createElement("br",null),l.a.createElement("div",{className:"displayFlex"},l.a.createElement(g.a,{onClick:()=>C(!0)},"Take a photo"),l.a.createElement(g.a,{onClick:()=>e("/history")},"Access History"))),w&&l.a.createElement(S,{setImagePath:L,setCroppedImage:U,setIsTakePhotoByCamera:C}),y&&l.a.createElement(F,{imageUrl:T,setIsGenerateReport:j}))};a(67),a(68);function M(){const[e,t]=Object(n.useState)([]);return Object(n.useEffect)(()=>{(async()=>{try{await I.a.get("http://localhost:3312/gallary/v1/photos/filter?userId=63e1532bac33633a3df896e3").then(e=>{var a;e.data.Photos&&t(null===e||void 0===e?void 0:null===(a=e.data)||void 0===a?void 0:a.Photos)})}catch(e){}})()},[]),l.a.createElement("section",null,l.a.createElement("div",{class:"main-container"},l.a.createElement("ul",{class:"grid-wrapper"},null===e||void 0===e?void 0:e.map((e,t)=>l.a.createElement("a",{href:null===e||void 0===e?void 0:e.imagesPath,target:"_blank"},l.a.createElement("div",null,l.a.createElement("img",{src:null===e||void 0===e?void 0:e.imagesPath,width:"200px",height:"200px"}),l.a.createElement("p",null,"image ",t+1))))),0==(null===e||void 0===e?void 0:e.length)&&l.a.createElement("h3",null,"Cropped Image Not found!")))}var P=function(){return l.a.createElement(c.c,null,l.a.createElement(c.a,{path:"/",element:l.a.createElement(U,null)}),l.a.createElement(c.a,{path:"/history",element:l.a.createElement(M,null)}),l.a.createElement(c.a,{path:"/image2pdf",element:l.a.createElement(F,null)}))};var T=e=>{e&&e instanceof Function&&a.e(5).then(a.bind(null,193)).then(t=>{let{getCLS:a,getFID:n,getFCP:l,getLCP:r,getTTFB:i}=t;a(e),n(e),l(e),r(e),i(e)})},L=a(23);i.a.createRoot(document.getElementById("root")).render(l.a.createElement(L.a,null,l.a.createElement(P,null))),T()}},[[44,1,3]]]);
//# sourceMappingURL=main.c8c9cc35.chunk.js.map